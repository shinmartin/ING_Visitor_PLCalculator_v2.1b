function getSessionId(){var e=$.cookie(COOKIE_SESSION_ID);return void 0===e&&(e=""),e}function setSessionId(e){void 0!==e&&$.cookie(COOKIE_SESSION_ID,e,{})}function getUniqueId(){var e=$.cookie(COOKIE_UNIQUE_ID);return void 0===e&&(e=""),e}function setUniqueId(e){void 0!==e&&$.cookie(COOKIE_UNIQUE_ID,e,{})}function getFaqRate(e){var t=$.cookie(COOKIE_FAQ_RATES);if(void 0===t)return 0;var n=JSON.parse(t),a=n[e];return void 0===a?0:a}function setFaqRate(e,t){var n=$.cookie(COOKIE_FAQ_RATES),a={};void 0!==n&&(a=JSON.parse(n)),a[e]=t,$.cookie(COOKIE_FAQ_RATES,JSON.stringify(a),{})}function arrayToCommaString(e){return e.join(",")}function commaStringToarray(e){return e.split(",")}function htmlEncode(e){return $("<div/>").text(e).html()}function htmlDecode(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function htmlToPlainText(e){return e?String(e).replace(/<[^>]+>/gm,""):""}function clickSideFaqButton(){if($("body").hasClass("active-side-faq")){$("body").removeClass("active-side-faq"),setTimeout(function(){$(".side-faq").css("visibility","hidden"),$(".side-faq-button .normal").addClass("active"),$(".side-faq-button .close").removeClass("active")},400);var e=getMobileOperatingSystem();"iOS"!==e&&"Android"!==e||($(".mobile-side-slider").css("height","auto").css("overflow","auto"),$(".ING-body > .tab-height-manager").css("transform","none"),$(".ING-body > .content-hero").css("transform","none"),$(".ING-body > .ING-home-slider").css("transform","none"),$(".ING-body > .ING-people").css("transform","none"),$(".ING-body > .ING-content").css("transform","none"),$(".ING-body .ING-tab-header").hasClass("sticky")||$(".ING-body .ING-tab-header").css("transform","none"),$(".ING-body .ING-tab-body").css("transform","none"),$(".ING-footer").css("transform","none"),$(".side-faq-button").hasClass("sticky")||$(".side-faq-button").css("transform","none"),$("body").scrollTop(_scrollTop))}else{if(enableTracking){var t=new CustomEvent("hs_tab_event",{detail:{eventType:"activation"}});$("button.side-faq-button")[0].dispatchEvent(t)}$(".side-faq").css("visibility","visible"),$("body").addClass("active-side-faq"),setTimeout(function(){$(".side-faq-button .normal").removeClass("active"),$(".side-faq-button .close").addClass("active")},400);e=getMobileOperatingSystem();"iOS"!==e&&"Android"!==e||(_scrollTop=$("body").scrollTop(),$(".mobile-side-slider").css("height",$(window).innerHeight()+"px").css("overflow","hidden"),$(".ING-body > .tab-height-manager").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body > .content-hero").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body > .ING-home-slider").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body > .ING-people").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body > .ING-content").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body .ING-tab-body").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-body .ING-tab-header").hasClass("sticky")||$(".ING-body .ING-tab-header").css("transform","translateY(-"+_scrollTop+"px)"),$(".ING-footer").css("transform","translateY(-"+_scrollTop+"px)"),$(".side-faq-button").hasClass("sticky")||$(".side-faq-button").css("transform","translateY(-"+_scrollTop+"px)"))}}function getMobileOperatingSystem(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPad/i)||e.match(/iPhone/i)||e.match(/iPod/i)?"iOS":e.match(/Android/i)?"Android":"unknown"}function focusWatcher(){document.querySelector(".search-field").style.width="38px"}var enableTracking=!0,api_url="/ReverseProxy/";(function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e})();var _ScrollTop,COOKIE_SESSION_ID="ING-sessionId",COOKIE_UNIQUE_ID="ING-uniqueId",COOKIE_FAQ_RATES="ING-faqRates",appConfig=angular.module("app.config",[]),app=angular.module("ING-App",["ngAnimate","ui.bootstrap","app.config","ngSanitize"]);appConfig.constant("apiInfo",{apiSuggestionList:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/getsuggestions",apiSearchFaqList:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/search",apiProductFaqList:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/getproductfaqs",apiFaqDetail:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/getfaq",apiFaqRate:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/rate",apiFaqList:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/getfaqpage",apiMarkViewed:api_url+"KnowledgeBaseService/V1/KnowledgeBaseService.svc/json/markviewed"}),appConfig.constant("productFaqInfo",{maxProductFaqCount:10,maxRelatedItemCount:10,maxFaqLate:5,maxSearchItemCount:10,maxFaqListCount:200,faqTabNames:["General","Security","Bank & Save","Orange One","Personal Loans","Home Loans","Insurance","Superannuation"],faqTabKeys:["General","Security","Bank and save","Orange One","Personal loans","Home Loans","Insurance","Superannuation"],keyReferrer:"Web"}),appConfig.constant("sideFaqInfo",{maxSuggestionCount:10,maxProductFaqCount:10,maxSearchFaqCount:9999,maxRelatedItemCount:10,minKeywordStrLength:3,searchPageUrl:"/search-list.html?term=[KEYWORD]",registeredProductKeys:["General","Security","Orange Everyday","Savings","Home Loans","Superannuation","Business","Savings Maximiser","Personal Term Deposit","Savings Accelerator","Orange Advantage","Mortgage simplifier","Home loans Action Equity","Construction Home Loan","Commercial Loans","Fixed Rate Home Loan","Smart Home Loan","Living Super","SMSF Cash","SMSF Term Deposit","Business Optimiser","Business Term Deposit","SiteTop10","Orange One","Personal loans","Bank & Save"]}),appConfig.constant("templateInfo",{productFaqList:"product-faq-list",faqList:"faq-list",faqDetail:"faq-detail"}),app.filter("orderObjectBy",function(){return function(e,t){if(!angular.isObject(e))return e;var n=[];for(var a in e)n.push(e[a]);return n.sort(function(e,n){return e=parseInt(e[t]),n=parseInt(n[t]),e-n}),n}}),app.controller("ProductFaqListController",["$scope","$http","productFaqInfo","apiInfo",function(e,t,n,a){e.loading,e.faqList,e.param={product:"",count:"",referrer:"",sessionId:"",uniqueId:""},e.openModal=function(e){$("#faqModalSample").data("faqId",e).modal("show")};var o=function(){e.loading=!0;var t={};t.Product=e.param.product,t.Count=e.param.count,t.Referrer=e.param.referrer,0!==e.param.sessionId.length&&(t.SessionId=e.param.sessionId),0!==e.param.uniqueId.length&&(t.UniqueIdentifier=e.param.uniqueId);var n=JSON.stringify(t);if($.ajax({type:"POST",url:a.apiProductFaqList,data:n,contentType:"application/json",success:function(t){0===e.param.sessionId.length&&(setSessionId(t.SessionId),e.param.sessionId=getSessionId()),0===e.param.uniqueId.length&&(setUniqueId(t.UniqueIdentifier),e.param.uniqueId=getUniqueId()),e.faqList=t.Faqs,e.loading=!1,e.$apply()},error:function(){console.log("ProductFaqListController: error"),e.loading=!1,e.$apply()}}),e.param.product2){var o={};o.Product=e.param.product2,o.Count=e.param.count,o.Referrer=e.param.referrer;var r=JSON.stringify(o);$.ajax({type:"POST",url:a.apiProductFaqList,data:r,contentType:"application/json",success:function(t){0===e.param.sessionId.length&&(setSessionId(t.SessionId),e.param.sessionId=getSessionId()),0===e.param.uniqueId.length&&(setUniqueId(t.UniqueIdentifier),e.param.uniqueId=getUniqueId()),e.faqList2=t.Faqs,e.loading=!1,e.$apply()},error:function(t){console.log("ProductFaqListController: error"),e.loading=!1,e.$apply()}})}},r=function(){e.param.product=KEY_PRODUCT,"undefined"!=typeof KEY_PRODUCT2&&(e.param.product2=KEY_PRODUCT2),"undefined"!=typeof PRODUCT_FAQ_COUNT?e.param.count=PRODUCT_FAQ_COUNT:e.param.count=n.maxProductFaqCount,e.param.referrer=n.keyReferrer,e.param.sessionId=getSessionId(),e.param.uniqueId=getUniqueId(),e.faqList=[],e.loading=!1,o()};r()}]),app.controller("FaqContentController",["$scope","$http","$sce","productFaqInfo","apiInfo",function(e,t,n,a,o){e.loading=!1,e.isRoot=!0,e.historyQueue=[],e.param={id:"",relatedItemsCount:0,referrer:"",sessionId:"",uniqueId:""},e.result="",e.htmlContent="",e.initialize=function(){e.historyQueue=null,e.isRoot=null,e.result="",e.htmlContent="",e.param.relatedItemsCount=a.maxRelatedItemCount,e.param.referrer="Unknown",e.param.sessionId=getSessionId(),e.param.uniqueId=getUniqueId();var t=getUrlParameterByName("faqid");e.param.id=t,r(!1)},e.initModal=function(t){e.historyQueue=[],e.isRoot=!0,e.result="",e.htmlContent="",e.param.relatedItemsCount=a.maxRelatedItemCount,e.param.referrer="Unknown",e.param.sessionId=getSessionId(),e.param.id=t,r(!0)},e.nextFaqWithId=function(t){e.param.id=t,r(!0)},e.goBack=function(){e.historyQueue.length>1?(e.loading=!0,e.historyQueue.pop(),e.result=e.historyQueue[e.historyQueue.length-1],e.htmlContent=n.trustAsHtml(e.result.Body),e.isRoot=!(e.historyQueue.length>1),e.loading=!1):console.log("You can't go back on root status.")},e.getPreviousHtmlTitle=function(){if(e.historyQueue.length>1)return e.getHtmlText(e.historyQueue[e.historyQueue.length-2].Title)},e.updateRate=function(t,n){var a=new CustomEvent("faq_rating_event",{detail:{eventType:"rating",rating:t}});if($("div.search-rating")[0].dispatchEvent(a),e.result.needRating){if(e.result.needRating=!1,e.result.rating=t,n){var o=e.historyQueue[e.historyQueue.length-1];o.needRating=!1,o.rating=t}setFaqRate(e.result.Id,t),i(e.result.Id,e.result.rating)}},e.getHtmlText=function(e){return n.trustAsHtml(e)};var r=function(t){e.loading=!0;var a={};a.Id=e.param.id,a.RelatedItemsCount=e.param.relatedItemsCount,a.Referrer=e.param.referrer,0!==e.param.sessionId.length&&(a.SessionId=e.param.sessionId),0!==e.param.uniqueId.length&&(a.UniqueIdentifier=e.param.uniqueId);var r=JSON.stringify(a);$.ajax({type:"POST",url:o.apiFaqDetail,data:r,contentType:"application/json",success:function(a){0===e.param.sessionId.length&&(setSessionId(a.SessionId),e.param.sessionId=getSessionId()),0===e.param.uniqueId.length&&(setUniqueId(a.UniqueIdentifier),e.param.uniqueId=getUniqueId()),a.rating=getFaqRate(a.Id),0===a.rating?a.needRating=!0:a.needRating=!1,t?(e.historyQueue.push(a),e.result=e.historyQueue[e.historyQueue.length-1],e.htmlContent=n.trustAsHtml(e.result.Body),e.isRoot=!(e.historyQueue.length>1)):(e.result=a,e.htmlContent=n.trustAsHtml(e.result.Body)),e.loading=!1,e.$apply()},error:function(t){console.log("FaqContentController: error"),e.loading=!1,e.$apply()}})},i=function(e,t){var n={};n.Id=e,n.Rate=t,n.Scale=a.maxFaqLate,n.SessionId=getSessionId();var r=JSON.stringify(n);$.ajax({type:"POST",url:o.apiFaqRate,data:r,contentType:"application/json"})}}]),$("#faqModalSample").on("show.bs.modal",function(e){angular.element("#faqModalSampleBody").scope().initModal($(this).data("faqId"))}),app.controller("FaqLandingController",["$scope","$http","productFaqInfo","apiInfo",function(e,t,n,a){e.tabNames=n.faqTabNames,e.param={product:"",index:null,pageSize:"",referrer:"",sessionId:"",uniqueId:""},e.loading=!1,e.faqGroups,e.load=function(){e.loading=!0;var t={};t.Product=n.faqTabKeys[e.param.index],t.PageSize=e.param.pageSize,t.Referrer=e.param.referrer,0!==e.param.sessionId.length&&(t.SessionId=e.param.sessionId),0!==e.param.uniqueId.length&&(t.UniqueIdentifier=e.param.uniqueId);var o=JSON.stringify(t);$.ajax({type:"POST",url:a.apiFaqList,data:o,contentType:"application/json",success:function(t){0===e.param.sessionId.length&&(setSessionId(t.SessionId),e.param.sessionId=getSessionId()),0===e.param.uniqueId.length&&(setUniqueId(t.UniqueIdentifier),e.param.uniqueId=getUniqueId()),e.faqGroups=[];for(var n=0;n<t.FaqPages.length;n++)t.FaqPages[n].Count>0&&e.faqGroups.push(t.FaqPages[n]);e.loading=!1,e.$apply()},error:function(t){console.log("FaqLandingController: error"),e.loading=!1,e.$apply()}})},e.moveToPositionWithId=function(e){var t=$(e).offset().top-headerBottomHeight;1===$(".ING-tab-header").size()&&(t=$(target).offset().top-(headerBottomHeight+$(".ING-tab-header .tabs-wrapper").height())),$("body, html").stop().animate({scrollTop:t},500,"easeOutQuint")};var o=function(){var t=!0,a=getUrlParameterByName("product"),o=getUrlParameterByName("pageSize"),r=getUrlParameterByName("referrer"),i=getUrlParameterByName("sessionId"),s=getUrlParameterByName("uniqueId");"Bank "==a&&(a="Bank & Save");var u=n.faqTabNames.indexOf(a);e.param.product=void 0!==a?a:e.tabNames[0],e.param.index=void 0!==u?u:0,e.param.pageSize=void 0!==o?o:n.maxFaqListCount,e.param.referrer=void 0!==r?r:a,e.param.sessionId=void 0!==i?i:getSessionId(),e.param.uniqueId=void 0!==s?s:getUniqueId(),e.content="",t&&e.load()};o()}]),app.controller("SearchListController",["$scope","$sce","$http","productFaqInfo","apiInfo",function(e,t,n,a,o){e.loading,e.loadingPartial,e.content,e.noContent=!1,e.totalCount=0,e.pagenationInfo={},e.param={term:"",page:"",pageSize:"",relatedItemCount:"",sessionId:"",uniqueId:"",productInfo:{id:"",title:"",count:""},filterInfos:[]},e.isAll=function(){return!(String(e.param.productInfo.id).length>0)},e.getCurrentProductName=function(){var t="";return t=e.param.productInfo.title.length>0?e.param.productInfo.title:"All",t},e.getProductCount=function(t){var n=0;if(void 0!==e.content)if(t.length>0){for(var a=0;a<e.content.Products.length;a++)if(e.content.Products[a].Title===t){n=e.content.Products[a].Count;break}}else n=e.totalCount;return n},e.getTotalCount=function(){var t=0;return void 0!==e.content&&(t=e.totalCount),t},e.resetFilters=function(){for(var t=0;t<e.param.filterInfos.length;t++){var n=e.param.filterInfos[t];n.checkbox_status=!1}},e.redirectForMarking=function(e,t){var n={};n.Id=t,n.SessionId=getSessionId();var a=JSON.stringify(n);$.ajax({type:"POST",url:o.apiMarkViewed,data:a,contentType:"application/json"}),"faq"===e?setTimeout(function(){window.location="/faq-result.html?faqid="+t},500):setTimeout(function(){window.location=t},500)},e.loadWithProductName=function(t){t!==e.param.productInfo.title&&(s(t),u(),r(!0))},e.loadWithFilter=function(){$('[href="#collapseSearchFilter"]').addClass("collapsed"),$("#collapseSearchFilter").collapse("hide"),e.param.page=1,r(!0)},e.loadWithPageIndex=function(t){t!==e.pagenationInfo.currentPage&&(t<1||t>e.pagenationInfo.pageList.length||(e.param.page=t,r(!0)))},e.getHtmlText=function(e){return t.trustAsHtml(e)},e.showPagenation=function(){return e.totalCount>a.maxSearchItemCount};var r=function(t){t?e.loadingPartial=!0:e.loading=!0;var n={};if(n.Term=e.param.term,n.Page=e.param.page,n.PageSize=e.param.pageSize,n.RelatedItemsCount=e.param.relatedItemCount,0!==e.param.sessionId.length&&(n.SessionId=e.param.sessionId),0!==e.param.uniqueId.length&&(n.UniqueIdentifier=e.param.uniqueId),String(e.param.productInfo.id).length>0&&(n.Product={Id:e.param.productInfo.id,Title:e.param.productInfo.title,Count:e.param.productInfo.count}),e.param.filterInfos.length>0){for(var a=!1,r=0;r<e.param.filterInfos.length;r++){var i=e.param.filterInfos[r];if(!0===i.checkbox_status){a=!0;break}}if(a){var s=[];for(r=0;r<e.param.filterInfos.length;r++)if(i=e.param.filterInfos[r],i.checkbox_status){var u={};u.Id=i.Id,u.Title=i.Title,u.Count=i.Count,s.push(u)}n.FilterBy=s}}var d=JSON.stringify(n);e.noResult=!1,$.ajax({type:"POST",url:o.apiSearchFaqList,data:d,contentType:"application/json",success:function(n){0===e.param.sessionId.length&&(setSessionId(n.SessionId),e.param.sessionId=getSessionId()),0===e.param.uniqueId.length&&(setUniqueId(n.UniqueIdentifier),e.param.uniqueId=getUniqueId()),0===String(e.param.productInfo.id).length&&(e.totalCount=n.TotalMatchedRecords),e.content=n,c(n.FilterBy),parseInt(e.content.TotalMatchedRecords,10)>0?e.noContent=!1:e.noContent=!0,t?e.loadingPartial=!1:e.loading=!1,l(),$("body, html").stop().animate({scrollTop:0},"500","swing"),e.$apply()},error:function(n){console.log("SearchListController: error"),t?e.loadingPartial=!1:e.loading=!1,e.noContent=!0,e.$apply()}})},i=function(){e.param.page=1,e.param.pageSize=a.maxSearchItemCount,e.param.relatedItemCount=a.maxRelatedItemCount,e.param.sessionId=getSessionId(),e.param.uniqueId=getUniqueId();var t=getUrlParameterByName("term");void 0!==t?(e.param.term=t,r(!1)):e.noContent=!0},s=function(t){e.param.page=1;for(var n=null,a=0;a<e.content.Products.length;a++)if(e.content.Products[a].Title===t){n=e.content.Products[a];break}null!==n?(e.param.productInfo.id=n.Id,e.param.productInfo.title=n.Title,e.param.productInfo.count=n.Count):(e.param.productInfo.id="",e.param.productInfo.title="",e.param.productInfo.count="")},u=function(){e.param.filterInfos=[]},c=function(t){for(var n=e.param.filterInfos,a=[],o=0;o<t.length;o++){for(var r=t[o],i=!1,s=0;s<n.length;s++){var u=n[s];if(u.Id===r.Id){a.push(u),i=!0;break}}if(!i){var c=r;c.checkbox_status=!1,a.push(c)}}e.param.filterInfos=a},l=function(){var t=e.getCurrentProductName(),n=0;if("All"===t)n=e.totalCount;else for(var o=0;o<e.content.Products.length;o++)if(t===e.content.Products[o].Title){n=e.content.Products[o].Count;break}var r=Math.ceil(n/a.maxSearchItemCount),i=[];for(o=1;o<=r;o++)i.push(o);e.pagenationInfo.currentPage=e.param.page,e.pagenationInfo.pageList=i,e.pagenationInfo.startIndex=(parseInt(e.pagenationInfo.currentPage,10)-1)*parseInt(e.param.pageSize,10)+1;var s=parseInt(e.pagenationInfo.currentPage,10)*parseInt(e.param.pageSize,10);e.pagenationInfo.endIndex=s<n?s:n};i()}]),app.controller("SharesEFTController",["$scope","$sce","$http","productFaqInfo","apiInfo",function(e,t,n,a,o){e.loading,e.loadingPartial,e.content,e.etfsContent=[],e.etfContentFiltered=[],e.noContent=!1,e.totalCount=0,e.pagenationInfo={},e.PageSize=10,e.param={term:"",page:"",pageSize:"",relatedItemCount:"",sessionId:"",uniqueId:"",etfInfo:{id:"",title:"",count:"",Name:"",ASXCode:"",ManagementCost:"",StandardRiskMeasure:"",TierStructure:"",AssetClass:"",MixedAssets:"",Australian:"",International:"",Equities:"",Bonds:"",EmergingMarkets:"",RealEstate:"",Infrastructure:"",Cash:"",Commodities:"",Currency:"",Healthcare:"",Technology:"",Sustainability:"",FundObjective:"",FundDescription:"",FactSheet:""},filterInfos:[]},e.getTotalCount=function(){var t=0;return void 0!==e.content&&(t=e.totalCount),t},e.resetFilters=function(){e.param.filterInfos.forEach(function(e){e.checkbox_status=!1}),f()},e.loadWithFilter=function(){$('[href="#collapseSearchFilter"]').addClass("collapsed"),$("#collapseSearchFilter").collapse("hide"),e.param.page=1,e.searchText="",f(0)},e.loadWithPageIndex=function(t){t!==e.pagenationInfo.currentPage&&(t<1||t>e.pagenationInfo.pageList.length||(e.param.page=t,f(t)))},e.getHtmlText=function(e){return t.trustAsHtml(e)},e.showPagenation=function(){return e.totalCount>e.PageSize},e.searchETFs=function(){f(1)};var r=function(t){t?e.loadingPartial=!0:e.loading=!0;var a={};a.Term=e.param.term,a.Page=e.param.page,a.PageSize=e.param.pageSize;JSON.stringify(a);e.noResult=!1,n.get("/js/super-etf.json").success(function(n){0===String(e.param.etfInfo.id).length&&(e.totalCount=n.length),e.content=n;var a=[];JSON.parse(JSON.stringify(n)).forEach(function(e){e.DescLimit=100,e.RiskLable=c(e.StandardRiskMeasure),a.push(e)}),e.etfsContent=a,e.content.TotalMatchedRecords=n.length,u(),parseInt(e.content.TotalMatchedRecords,10)>0?e.noContent=!1:e.noContent=!0,t?e.loadingPartial=!1:e.loading=!1,f(),$("body, html").stop().animate({scrollTop:0},"500","swing")}).error(function(n){console.log("SearchListController: error"),t?e.loadingPartial=!1:e.loading=!1,e.noContent=!0,e.$apply()})},i=function(){e.param.page=1,e.param.pageSize=e.PageSize,s(),d(),r(!1)},s=function(t){e.param.filterInfos;var n=[];n.push(l("Technology ETFs","Technology")),n.push(l("Sustainability ETFs","Sustainability")),n.push(l("Healthcare ETFs","Healthcare")),n.push(l("Emerging Markets ETFs","EmergingMarkets")),n.push(l("Multi Asset ETFs","MixedAssets")),n.push(l("Australian Equities ETFs","Australian")),n.push(l("International Equities ETFs","International")),n.push(l("Fixed interest ETFs","Bonds")),n.push(l("Real Estate ETFs","RealEstate")),n.push(l("Infrastructure ETFs","Infrastructure")),n.push(l("Cash ETFs","Cash")),n.push(l("Commodities ETFs","Commodities")),n.push(l("Currency ETFs","Currency")),n.push(l("Shares","Share")),n.push(l("LICs","LIC")),e.param.filterInfos=n},u=function(){e.param.filterInfos.forEach(function(t){var n=e.content.filter(function(e){if(e[t.Value])return!0}).length;t.Title=t.Title+" ("+n+")"})},c=function(e){return 1==e?"Very Low":2==e?"Low":3==e?"Low to Medium":4==e?"Medium":5==e?"Medium to High":6==e?"High":7==e?"Very High":void 0},l=function(e,t){var n={checkbox_status:!1};return n.Title=e,n.Value=t,n},d=function(){var t=getUrlParameterByName("type");if(t){var n=e.param.filterInfos.filter(function(e){return e.Value.toLowerCase()==t.toLowerCase()});n&&n.length>0&&(n[0].checkbox_status=!0)}},f=function(t){var n=[];e.searchText?(e.content=e.etfsContent.filter(function(t){var n=t.Name+" "+t.FundDescription+" "+t.ASXCode;return!!new RegExp("\\b"+e.searchText.toLowerCase()+"\\b").test(n.toLowerCase())}),e.param.filterInfos.forEach(function(e){e.checkbox_status=!1})):(e.searchText="",e.param.filterInfos.forEach(function(e){e.checkbox_status&&n.push(e.Value)}),n.length<=0?e.content=e.etfsContent:e.content=e.etfsContent.filter(function(e){for(var t in n)if(e[n[t]])return!0;return!1})),t||(t=1),e.content.TotalMatchedRecords=e.content.length,e.etfContentFiltered=e.content.slice((t-1)*e.PageSize,(t-1)*e.PageSize+e.PageSize),p(),$("body, html").stop().animate({scrollTop:0},"500","swing")},p=function(){totalCount=e.content.length;var t=Math.ceil(totalCount/e.PageSize),n=[];for(index=1;index<=t;index++)n.push(index);e.pagenationInfo.currentPage=e.param.page,e.pagenationInfo.pageList=n,e.pagenationInfo.startIndex=(parseInt(e.pagenationInfo.currentPage,10)-1)*parseInt(e.param.pageSize,10)+1;var a=parseInt(e.pagenationInfo.currentPage,10)*parseInt(e.param.pageSize,10);e.pagenationInfo.endIndex=a<totalCount?a:totalCount};i()}]),app.controller("SideFaqController",["$scope","$http","$sce","$timeout","$q","apiInfo","sideFaqInfo","templateInfo",function(e,t,n,a,o,r,i,s){e.searchInfo={},e.searchInfo.selected=void 0,e.searchInfo.productId=void 0,e.searchInfo.searchTerm=void 0,e.searchInfo.suggestionList=[],e.searchInfo.faqListInfo=void 0,e.searchInfo.productFaqListInfo=void 0,e.searchInfo.faqDetailInfo=void 0,e.pageInfo={},e.pageInfo.contentLoading=!1,e.pageInfo.searchLoading=!1,e.pageInfo.lastTemplate=void 0,e.pageInfo.template=void 0,e.pageInfo.animation=void 0,e.templateInfo=s,e.init=function(t){angular.isDefined(t)&&(i.registeredProductKeys.indexOf(t)>-1?(e.searchInfo.productId=t,u()):(e.searchInfo.searchTerm=t,c()))},e.closeSideFaq=function(){clickSideFaqButton()},e.refreshSuggestionListEx=function(t){var n=htmlDecode(htmlEncode(t));if(t.length>=i.minKeywordStrLength){var a=o.defer();return p(n,function(n){if(n.Suggestions.length>0){e.searchInfo.suggestionList=[],angular.forEach(n.Suggestions,function(t,n){e.searchInfo.suggestionList.push(t)});var o=angular.copy(e.searchInfo.selected),r=e.searchInfo.suggestionList.indexOf(o);r>-1&&e.searchInfo.suggestionList.splice(r,1),e.searchInfo.suggestionList.unshift(o)}else e.searchInfo.suggestionList=[htmlToPlainText(t)];a.resolve(e.searchInfo.suggestionList)}),a.promise}return e.searchInfo.suggestionList=[],e.searchInfo.suggestionList},e.getSearchTitle=function(){if(angular.isDefined(e.searchInfo.faqListInfo)){var t=e.searchInfo.faqListInfo,n=t.Results.length+" result"+(t.Results.length>1?"s":"")+' for "'+(null===t.CorrectedTerm?htmlDecode(htmlEncode(e.searchInfo.selected)):htmlDecode(t.CorrectedTerm))+'"';return n}},e.searchFaqList=function(){l(),a(function(){$("input").blur()},100)},e.searchFaqListEx=function(){null!=e.searchInfo.suggestionList[0]&&(e.searchInfo.selected=e.searchInfo.suggestionList[0]),e.searchFaqList()},e.gotoFaqDetailFromProductFaq=function(t){e.pageInfo.lastTemplate=s.productFaqList,e.gotoFaqDetail(t)},e.gotoFaqDetailFromFaq=function(t){e.pageInfo.lastTemplate=s.faqList,e.gotoFaqDetail(t)},e.gotoFaqDetail=function(e){d(e)},e.gobackFaqList=function(){f(e.pageInfo.lastTemplate,"animation-slide-right")};var u=function(){angular.isUndefined(e.searchInfo.productFaqList)&&(e.pageInfo.contentLoading=!0,I(e.searchInfo.productId,function(t){e.searchInfo.productFaqListInfo=angular.copy(t),f(s.productFaqList,"animation-fade"),e.pageInfo.contentLoading=!1}))},c=function(){angular.isUndefined(e.searchInfo.productFaqList)&&(e.pageInfo.contentLoading=!0,m(e.searchInfo.searchTerm,function(t){e.searchInfo.productFaqListInfo=angular.copy(t),f(s.productFaqList,"animation-fade"),e.pageInfo.contentLoading=!1}))},l=function(){if(angular.isDefined(e.searchInfo.selected)){if(enableTracking){var t=new CustomEvent("hs_tab_event",{detail:{eventType:"search",searchTerm:e.searchInfo.selected}});$("button.side-faq-button")[0].dispatchEvent(t)}e.pageInfo.contentLoading=!0,g(e.searchInfo.selected,function(t){e.searchInfo.faqListInfo=angular.copy(t),f(s.faqList,"animation-fade"),e.pageInfo.contentLoading=!1})}},d=function(t){if(angular.isDefined(t)){if(enableTracking){var n=new CustomEvent("hs_tab_event",{detail:{eventType:"faq_click",faqID:t}});$("button.side-faq-button")[0].dispatchEvent(n)}e.pageInfo.contentLoading=!0,h(t,function(t){e.searchInfo.faqDetailInfo=angular.copy(t),f(s.faqDetail,"animation-slide-left"),e.pageInfo.contentLoading=!1})}},f=function(t,n){e.pageInfo.animation="",a(function(){e.pageInfo.animation=n,a(function(){e.pageInfo.template=t},100)},100)},p=function(e,t){var n={};n.Term=e,n.Count=i.maxSuggestionCount,n.Referrer="Web",q(r.apiSuggestionList,n,t)},g=function(e,t){var n={};n.Term=e,n.Page=1,n.PageSize=i.maxSearchFaqCount,n.RelatedItemsCount=i.maxRelatedItemCount,n.Referrer="Web",q(r.apiSearchFaqList,n,t)},I=function(e,t){var n={};n.Product=e,n.Count=i.maxProductFaqCount,n.Referrer="Web",q(r.apiProductFaqList,n,t)},m=function(e,t){var n={};n.Term=e,n.Page=1,n.PageSize=i.maxProductFaqCount,n.RelatedItemsCount=i.maxRelatedItemCount,n.Referrer="Web",q(r.apiSearchFaqList,n,t)},h=function(e,t){var n={};n.Id=e,n.RelatedItemsCount=i.maxRelatedItemCount,n.Referrer="Web",q(r.apiFaqDetail,n,t)},q=function(e,n,a){getSessionId().length>0&&(n.SessionId=getSessionId()),getUniqueId().length>0&&(n.UniqueIdentifier=getUniqueId()),t.post(e,n).then(function(e){0===getSessionId().length&&angular.isDefined(e.data.SessionId)&&setSessionId(e.data.SessionId),0===getUniqueId().length&&angular.isDefined(e.data.UniqueIdentifier)&&setUniqueId(e.data.UniqueIdentifier),angular.isDefined(e.data.Result)&&(e.data.Results=[],e.data.CorrectedTerm=null),a(e.data)},function(e){v(e)}).finally(function(){})},v=function(t){e.pageInfo.contentLoading=!1,e.pageInfo.searchLoading=!1};e.trustAsHtml=function(e){return n.trustAsHtml(e)}}]),app.controller("NewSearchController",["$scope","$http","$sce","$window","$q","apiInfo","sideFaqInfo",function(e,t,n,a,o,r,i){e.searchInfo={},e.searchInfo.selected=void 0,e.searchInfo.suggestionList=[],e.init=function(){var t=getUrlParameterByName("term");void 0!==t&&(e.searchInfo.suggestionList.push(t),e.searchInfo.selected=e.searchInfo.suggestionList[0])},e.getSuggestionList=function(t){var n=e.searchInfo.suggestionList.slice();if(t){var a=n.indexOf(t);a>-1&&n.splice(a,1),n.unshift(t)}return n},e.refreshSuggestionListEx=function(t){var n=htmlEncode(t);if(t.length>=i.minKeywordStrLength){var a=o.defer(),u={};return u.Term=n,u.Count=i.maxSuggestionCount,u.Referrer="Web",s(r.apiSuggestionList,u,function(t){if(t.Suggestions.length>0){e.searchInfo.suggestionList=[],angular.forEach(t.Suggestions,function(t,n){e.searchInfo.suggestionList.push(t)});var o=angular.copy(e.searchInfo.selected),r=e.searchInfo.suggestionList.indexOf(o);r>-1&&e.searchInfo.suggestionList.splice(r,1),e.searchInfo.suggestionList.unshift(o)}else e.searchInfo.suggestionList=[n];a.resolve(e.searchInfo.suggestionList)}),a.promise}return e.searchInfo.suggestionList=[],e.searchInfo.suggestionList},e.gotoSearchPage=function(){if(document.documentElement.clientWidth>766)if(document.querySelector(".search-field").offsetWidth<50)document.querySelector(".search-field").style.width="225px",document.querySelector(".search-field").style.position="absolute",document.querySelector(".search-field").style.right="0",document.querySelectorAll(".search-control")[1].focus(),document.querySelectorAll("input[name=term]")[1].setAttribute("onblur","focusWatcher()");else{e.searchInfo.selected=htmlDecode(e.searchInfo.selected);var t=i.searchPageUrl.replace("[KEYWORD]",htmlDecode(e.searchInfo.selected));a.location=encodeURI(t)}else{e.searchInfo.selected=htmlDecode(e.searchInfo.selected);t=i.searchPageUrl.replace("[KEYWORD]",htmlDecode(e.searchInfo.selected));a.location=encodeURI(t)}};var s=function(e,n,a){getSessionId().length>0&&(n.SessionId=getSessionId()),getUniqueId().length>0&&(n.UniqueIdentifier=getUniqueId()),t.post(e,n).then(function(e){0===getSessionId().length&&angular.isDefined(e.data.SessionId)&&setSessionId(e.data.SessionId),0===getUniqueId().length&&angular.isDefined(e.data.UniqueIdentifier)&&setUniqueId(e.data.UniqueIdentifier),a(e.data)},function(e){u(e)}).finally(function(){})},u=function(e){console.log(e)};e.trustAsHtml=function(e){return n.trustAsHtml(e)}}]),$(window).scroll(function(e){var t=360;$("body").hasClass("active-side-faq")||($(window).scrollTop()>t?$(".side-faq-button").addClass("sticky"):$(".side-faq-button").removeClass("sticky"))}),$(document).ready(function(){$(".rating > .star").hover(function(){$(this).parent().hasClass("disabled")||($(this).css("color","#ff6600"),$(this).prevAll().css("color","#ff6600"))},function(){$(this).parent().hasClass("disabled")||($(this).css("color","#bdbdbd"),$(this).prevAll().css("color","#bdbdbd"))}),$(".rating").hover(function(){},function(){$(this).find(".star").removeAttr("style")}),$(".search-form").submit(function(e){$(this).find("input.input-search").val().length<=0&&e.preventDefault()})});